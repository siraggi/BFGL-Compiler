dcl Game game to new Game()
dcl InputBFGL input to new InputBFGL()

Main begin
    dcl Player player to new Player()
    dcl Enemy enemy to new Enemy()
end

class Player is Sprite begin
    dcl num speed
    dcl num vel

    OnConstruct() do
        base(40, 200, 20, 150, "Player")
        set speed to 1
        game.Sprites.add(this)
    end

    OnUpdate() do
        if input.key.W.isDown then
             set vel to -speed
        else if input.key.S.isDown then
             set vel to speed
        else
            set vel to 0
        end
        set posY to posY+vel
    end
end

class Enemy is Sprite begin
  dcl num speed to 1
  dcl num vel
  dcl Ball ball
  
  OnConstruct() do
    base(300, 200, 20, 150, "Enemy")
    game.Sprites.add(this)
    set ball to new Ball()
  end

  OnUpdate() do                           /* A event as explained in the previous section       */
    if posY < ball.posY then                /* Use the reference obtained earlier, to move the enemy accordingly */
      set vel to speed

    else if posY > ball.posY then
      set vel to -speed
    end
    set posY to posY+vel
  end
end

class Ball is Sprite begin
  dcl num speed
  dcl Vector vect

  OnConstruct() do
    base(200, 200, 20,20, "Ball")
    set vect to new Vector(1,0)
    set speed to 1
    game.Sprites.add(this)
  end

  OnCollision(Sprite other) do

  end

  OnUpdate() do
    set posX to posX+vect.x
  end
end